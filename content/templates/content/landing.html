{% extends 'base.html' %}
{% load static from staticfiles %}

{% block bot_header %}
  <li class="masonic-eye" id="bot-open"><a href="#"></a></li>
{% endblock %}

{% block bot %}
{% include 'bot/bot.html' with bot=conf.bot_question %}
{% endblock %}

{% block left_menu %}
<section class="history-section">
  <div class="container">
    <div class="left-menu">
      <nav>
          <a href="{% if conf.show_about %}#history{% else %}#!{% endif %}">История</a>
          <a href="{% if conf.show_clients %}#clients{% else %}#!{% endif %}">Клиенты</a>
          <a href="{% if conf.show_portfolio %}#portfolio{% else %}{% url 'content:portfolio' %}{% endif %}">Портфолио</a>
          <a href="{% if conf.show_contacts %}#contacts{% else %}{% url 'content:contacts' %}{% endif %}">Контакты</a>
      </nav>
    </div>
  </div>
</section>
{% endblock %}

{% block content %}
  <!-- TODO: styling -->
  {% if conf.block_trap_text %}
  <section class="history-section">
    <div class="container">
      <p>{{ conf.block_trap_text }}</p>
    </div>
  </section>
  {% endif %}

  <!-- TODO: styling, fixed header offset, anchor linking method -->
  {% if conf.show_about %}
  <section class="history-section">
    <div class="container">
      <!--history block start-->
      <div class="tagline">
          <p><span></span>{{ conf.about_slogan }}</p>
      </div>
      <hr width="2px" color="#fff" size='429px'>
      <div id="history" class="history">
          <h2>ИСТОРИЯ</h2>
          {{ conf.about_text|linebreaks }}
      </div>

      <!-- TODO: styling -->
      <p class="unruled-in-numbers">Unruled в цифрах</p>
      <div class="statistics">
          {% for number in unruled_numbers %}
          <div class="statistics__block">
              <p>{{ number.number }}</p>
              <p>{{ number.measure_unit }}</p>
          </div>
        {% endfor %}
      </div>
    </div>
  </section>
  <!--history block end-->
  {% endif %}

  {% if conf.show_clients %}
  <!-- TODO: styling -->
  <!--clients start-->
  <section id="clients" class="clients-section">
      <div class="container">
          <h2 class="clients-section__title">НАШИ КЛИЕНТЫ</h2>
          <div class="clients-wrap">
              {% for client in clients %}
                <img src="{{ client.logo.url }}">
              {% endfor %}
              <a href="#" class="more-clients-btn">Смотреть еще</a>
          </div>
      </div>
  </section>
  <!--clients end-->
  {% endif %}


  {% if conf.show_why_unruled %}
  <!--why unruled start-->
  <!-- TODO: styling -->
  <section class="unruled">
      <div class="container">
          <h2 class="unruled__title">ПОЧЕМУ UNRULED</h2>
          <div class="advantages">
            {% for reason in why_unruled %}
              <div class="advantage">
                  <p><img src="{{ reason.icon.url }}"></p>
                  <p class="advantage__text">{{ reason.text }}</p>
              </div>
            {% endfor %}
          </div>
          <a href="#!" class="open-project-btn pop-up-form-open">Открыть проект</a>
      </div>
  </section>

  <!--why unruled end-->
  {% endif %}


  {% if conf.show_portfolio %}
  <!--portfolio start-->
  <!-- TODO: styling -->
  <section id="portfolio" class="portfolio-section">
      <div class="container">
          <h2 class="portfolio-section__title">ПОРТФОЛИО</h2>

          <div class="portfolio">
              {% for item in portfolio_list %}
              <div class="portfolio__project project">
                  <p class="project__img shadow" style="background-image:url({{ item.image.url }})"></p>
                  <div class="project__info">
                      <p class="project__info__title">{{ item.name }}</p>
                      <p class="project__info__text">{{ item.short_description }}</p>
                      <p class="project__btns">
                          <a href="{{ item.get_absolute_url }}" class="project__btn project__btn-more">Посмотреть</a>
                      </p>
                  </div>
              </div>
            {% endfor %}

              <a href="{% url 'content:portfolio' %}" class="portfolio__btn-more">Смотреть еще</a>
          </div>

      </div>
  </section>

  <!--portfolio end-->
  {% endif %}

  {% if conf.show_contacts %}
  <!--contacts start-->
  <section id="contacts" class="contacts-section">

    <!--google map start-->
    <section class="google-map">
        <div class="map" id="google-map" data-address="{{ conf.google_maps_address }}"></div>
    </section>
    <!--google map end-->

    <!--contacts form start-->

    <div class="form-container">
        <div class="container">
            <div class="form-wrap">
                <form action="{% url 'content:contacts' %}" class="contact-us-form" method="POST">
                    {% csrf_token %}
                    <!--input name start-->

                    <div class="contact-us-form__input-container">
                        <div class="contact-us-form__input-wrap">
                          {% if form.name.errors %}
                          <p class="contact-us-form__input-wrap__vldtn-wrap"><span class="">Незаполненое поле</span></p>
                          {% endif %}
                          <p><input class="contact-us-form__input contact-us-form__input-name" type="text" name="name"
                                  value="{{ form.name.value }}" placeholder="Имя"></p>
                        </div>
                    </div>

                    <!--input name end-->

                    <!--input email start-->

                    <div class="contact-us-form__input-container">
                        <div class="contact-us-form__input-wrap">
                          {% if form.email.errors %}
                          <p class="contact-us-form__input-wrap__vldtn-wrap"><span class="">Неправильно введен e-mail</span></p>
                          {% endif %}
                          <p><input class="contact-us-form__input contact-us-form__input-email" type="email" name="email"
                                  value="{{ form.email.value }}" placeholder="E-mail"></p>
                        </div>
                    </div>

                    <!--input email end-->

                    <!--message textarea start-->

                    <div class="contact-us-form__input-container">
                        <div class="contact-us-form__input-wrap">
                          {% if form.text.errors %}
                          <p class="contact-us-form__input-wrap__vldtn-wrap"><span class="">Вы не ввели текст сообщения</span></p>
                          {% endif %}
                          <p><textarea class="contact-us-form__input contact-us-form__input-message" type="text" name="text"
                                  placeholder="Ваше сообщение">{{ form.text.value }}</textarea></p>
                        </div>
                    </div>

                    <!--message textarea end-->

                    <!--form submit btn start-->

                    <div class="contact-us-form__input-container">
                        <div class="contact-us-form__input-wrap contact-us-form__input-wrap--submit">
                            <p class="contact-us-form__input-wrap__vldtn-wrap error-hide"><span class="">Ошибка формы</span></p>
                            <p><input class="contact-us-form__input contact-us-form__input-submit" type="submit"
                                    value="Отправить"></p>
                        </div>
                    </div>

                    <!--form submit btn end-->
                </form>
            </div>
        </div>
    </div>

    <!--contacts form end-->
  </section>
  <!--contacts end-->
  {% endif %}

  {% if extra_blocks %}
    {% for extra_block in extra_blocks %}
      {{ extra_block.html|safe }}
    {% endfor %}
  {% endif %}

    <!--pop-up form start-->

  <section class="popup">
      <div class="popup__form-wrap">
          <a href="#!" class="popup__close">x</a>

          <form action="{% url 'content:create_order' %}" class="popup-form" method="POST">
              {% csrf_token %}
              <div class="popup-form__input-wrap">
                  <p class="popup-form__error error-hide"><span>Незаполненое поле</span></p>
                  <p><input type="text" class="popup-form__input" name="name" placeholder="Ваше имя"></p>
              </div>

              <div class="popup-form__input-wrap">
                  <p class="popup-form__error error-hide"><span>Неверно введены данные</span></p>
                  <p><input type="text" class="popup-form__input" name="phone_or_email" placeholder="Ваш телефон или e-mail"></p>
              </div>

              <div class="popup-form__input-wrap">
                  <p class="popup-form__error error-hide"><span>Незаполненое поле</span></p>
                  <p><textarea type="text" class="popup-form__input popup-form__input--textarea" name="description" placeholder="Описание проекта"></textarea></p>
              </div>

              <div class="popup-form__input-wrap">
                  <p class="popup-form__upload-desc">Прикрепить Бизнес Требования / Техническое задание (макс. 5мб)</p>
                  <div class="popup-form__upload-wrap">
                      <label for="uploadfile" class="popup-form__input-upload-label"></label>
                      <input type="file" class="popup-form__input-upload" name="attachment" id="uploadfile">
                      <div class="popup-form__upload-file-name"></div>
                  </div>
              </div>

              <div class="popup-form__input-wrap popup-form__input-wrap-submit">
                  <p class="popup-form__error error-hide"><span>Ошибка формы</span></p>
                  <p><input type="submit" class="popup-form__input popup-form__input-submit" value="Отправить"></p>
              </div>

          </form>
      </div>
  </section>

  <!--pop-up form end-->
{% endblock %}

{% block scripts %}
  <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDlgAx5uM4UtPMSzDaVToeNGqe9uNZqRP4"></script>
  {{ block.super }}
{% endblock %}